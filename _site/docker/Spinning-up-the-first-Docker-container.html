<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Spinning up the first Docker container</title>
  <meta name="description" content="IntroductionThis is Cheat Sheets so I will just give a rather short introduction to Dockercontainers.Containers allow us to deploy an application on any mach...">

  <link rel="stylesheet" href="/cheatsheets/css/main.css">
  <link rel="canonical" href="http://localhost:4000/cheatsheets/docker/Spinning-up-the-first-Docker-container.html">
  <link rel="alternate" type="application/rss+xml" title="Cheat Sheets" href="http://localhost:4000/cheatsheets/feed.xml">
</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/cheatsheets/">Cheat Sheets</a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
        
          
        
          
        
          
        
          
        
      </div>
    </nav>

  </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Spinning up the first Docker container</h1>
    <p class="post-meta"><time datetime="2018-02-09T14:27:52+00:00" itemprop="datePublished">Feb 9, 2018</time></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <h2>Introduction</h2>
<p>This is Cheat Sheets so I will just give a rather short introduction to Docker
containers.
<br />
<br />
Containers allow us to deploy an application on any machine regardless its
environment, which means they will run the same way on every host machine.
<br />
They differ from virtual machines because they do not need to be shipped with
an entire OS or hardware abstraction tools (that a virtual machine requires),
which makes them very lightweight.
<br />
Still they are also isolated from the surrounding environment, by making use of
namespaces and cgroups, which are a part of the kernel, that determine what
processes can see and how much they can use.
<br />
<br />
In this post I will describe the difference between an image and a container
as well as the process to build an image and spin up a container. I will also
talk about the cleaning up process.
<br /></p>
<h2>Image and container</h2>
<p>To understand the following steps we need to understand the difference between
an image and a container.
Think of an image as a box, where you just put your application (and its
dependencies) inside, and the container as the running instance of what is
inside that box. The box is what you ship and what is inside the box is what
you use.
<br /></p>
<h2>Build the image</h2>
<p>1. Create a directory for your image:
<br />
<br />
<code class="highlighter-rouge">mkdir &lt;dir name&gt;</code>
<br />
<br />
2. Change path to your directory:
<br />
<br />
<code class="highlighter-rouge">cd &lt;dir name&gt;</code>
<br />
<br />
3. Create a file called “helloworld.py” with the following content:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">http.server</span> <span class="kn">import</span> <span class="n">HTTPServer</span>
<span class="kn">from</span> <span class="nn">http.server</span> <span class="kn">import</span> <span class="n">BaseHTTPRequestHandler</span>
<span class="kn">from</span> <span class="nn">http</span> <span class="kn">import</span> <span class="n">HTTPStatus</span>

<span class="k">class</span> <span class="nc">MyHandler</span><span class="p">(</span><span class="n">BaseHTTPRequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">do_GET</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_response</span><span class="p">(</span><span class="n">HTTPStatus</span><span class="o">.</span><span class="n">OK</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">send_header</span><span class="p">(</span><span class="s">'Content-type'</span><span class="p">,</span> <span class="s">'text/html'</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">end_headers</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wfile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">b</span><span class="s">'Hello World!'</span><span class="p">)</span>
        <span class="k">return</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">server_class</span><span class="o">=</span><span class="n">HTTPServer</span><span class="p">,</span> <span class="n">handler_class</span><span class="o">=</span><span class="n">MyHandler</span><span class="p">):</span>
    <span class="n">server_address</span> <span class="o">=</span> <span class="p">(</span><span class="s">'0.0.0.0'</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
    <span class="n">httpd</span> <span class="o">=</span> <span class="n">server_class</span><span class="p">(</span><span class="n">server_address</span><span class="p">,</span> <span class="n">handler_class</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Server is up and running!"</span><span class="p">)</span>
        <span class="n">httpd</span><span class="o">.</span><span class="n">serve_forever</span><span class="p">()</span>
    <span class="k">except</span> <span class="nb">KeyboardInterrupt</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Server will be stopped and connection closed!"</span><span class="p">)</span>
        <span class="n">httpd</span><span class="o">.</span><span class="n">socket</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">'__main__'</span><span class="p">:</span>
	<span class="n">run</span><span class="p">()</span></code></pre></figure>

<p>This is a simple program written in Python that will display a page with “Hello
World!” at the following address: 0.0.0.0:8000.
<br />
Note that this is a Python program but it could be anything!
<br />
<br />
4. Create a file called “Dockerfile” with the following content:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># base image</span>
FROM python:rc-alpine

<span class="c"># set entry working directory</span>
WORKDIR /usr/src/app

<span class="c"># expose port to access the app</span>
EXPOSE 8000

<span class="c"># command to run</span>
CMD <span class="o">[</span> <span class="s2">"python"</span>, <span class="s2">"./helloworld.py"</span> <span class="o">]</span>

<span class="c"># copy app to the image</span>
COPY ./helloworld.py /usr/src/app</code></pre></figure>

<p><br />
5. Build the image:
<br />
<br />
<code class="highlighter-rouge">docker build -t &lt;image name&gt;:&lt;tag&gt; &lt;context path&gt;</code>
<br />
<br />
Where <code class="highlighter-rouge">&lt;image name&gt;</code> is the name you want for the new image, <code class="highlighter-rouge">&lt;tag&gt;</code> is the tag
that you want to associate with the image (if you do not provide a tag it will
be “latest”) and <code class="highlighter-rouge">&lt;context path&gt;</code> the path where your files to be inserted in
the image and Dockerfile are (in this case the path to your created directory).
<br />
<br />
This will pull <code class="highlighter-rouge">python:rc-alpine</code> image from
<a href="https://hub.docker.com/">Docker Hub</a> registry to your local registry, and
execute the following commands.
<br />
<br />
6. Check the image was created:
<br />
<br />
<code class="highlighter-rouge">docker images</code>
<br /></p>
<h2>Spin up the container</h2>
<p>1. Spin up the container:
<br />
<br />
<code class="highlighter-rouge">docker run -d -p &lt;host port&gt;:8000 --name &lt;container name&gt; &lt;image name&gt;:&lt;tag&gt;</code>
<br />
<br />
Where <code class="highlighter-rouge">-d</code> stands for detached, which means your container will run in the
background, <code class="highlighter-rouge">-p</code> the port mapping, being the left side of <code class="highlighter-rouge">:</code> the port of the
host machine and the right side the port of the container (the one we exposed),
<code class="highlighter-rouge">&lt;container name&gt;</code> the name of the container that will be created,
<code class="highlighter-rouge">&lt;image name&gt;</code> the name of the image from which you want to spin up your
container (the one we created) and <code class="highlighter-rouge">&lt;tag&gt;</code> the tag of the image from which you
want to spin up your container.
<br />
<br />
2. See the container running:
<br />
<br />
<code class="highlighter-rouge">docker ps</code>
<br />
<br />
3. Access to <code class="highlighter-rouge">http://localhost:&lt;host port&gt;</code> (being <code class="highlighter-rouge">&lt;host port&gt;</code> the host port
mapped to the container) and see the “Hello World!” message!
<br /></p>
<h2>The cleaning up process</h2>
<p>1. Stop the container:
<br />
<br />
<code class="highlighter-rouge">docker stop &lt;container name&gt;</code>
<br />
<br />
2. Check if the container is no longer running:
<br />
<br />
<code class="highlighter-rouge">docker ps -a</code>
<br />
<br />
3. Remove the container:
<br />
<br />
<code class="highlighter-rouge">docker rm &lt;container name&gt;</code>
<br />
<br />
4. Check if the container was removed:
<br />
<br />
<code class="highlighter-rouge">docker ps -a</code></p>

  </div>

</article>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          
          <a class="page-link" href="/cheatsheets/">Cheat Sheets</a>
          
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
          

          
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Save time with cheat sheets!
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
